# 标签分析工具 (Tag Analyzer) - .NET 10 + C# 14

一个基于 .NET 10 和 Avalonia UI 的跨平台桌面应用程序，使用 C# 14 最新语法特性，用于分析文本文件中的标签信息。

## 功能特性

- 🎯 **智能解析**：自动识别文本中的 `【标签】` 格式
- 📊 **统计分析**：统计每个标签的出现次数和来源ID
- 🖥️ **现代界面**：基于 Avalonia UI 的现代化图形界面
- 📁 **文件选择**：支持通过对话框选择文本文件
- 📄 **CSV导出**：支持将分析结果导出为CSV格式
- 🔍 **ID追踪**：记录每个标签出现的具体ID位置
- 🔢 **格式兼容**：支持所有 M 开头的数字编号格式（M24、M35、M1、M100 等）
- 🌐 **跨平台**：支持 Windows、Linux、macOS

## 系统要求

- .NET 10.0 Runtime 或 SDK
- Windows 10/11, Linux, 或 macOS
- 支持 C# 14 语法特性

## 快速开始

### 1. 下载预编译版本（推荐）

📦 **GitHub Releases**: 访问 [Releases 页面](https://github.com/JiashuaiXu/TagAnalyzer-/releases) 下载最新版本的预编译可执行文件。

- 解压下载的 ZIP 文件
- 双击 `TagAnalyzer.exe` 即可运行
- 无需安装 .NET Runtime（自包含发布）

### 2. 从源码编译运行

```bash
# 克隆或下载项目
# 进入项目目录

# 还原依赖
dotnet restore

# 运行程序
dotnet run
```

### 3. 手动发布为可执行文件

```powershell
# Windows PowerShell
.\publish.ps1
```

发布完成后，可执行文件位于 `./publish/TagAnalyzer.exe`

## 使用方法

1. **启动程序**：双击 `TagAnalyzer.exe` 或运行 `dotnet run`
2. **选择文件**：点击"选择文件"按钮，选择要分析的 `.txt` 文件
3. **查看结果**：程序会自动解析并显示标签统计结果
4. **导出数据**：点击"导出CSV"按钮保存结果到文件
5. **清空结果**：点击"清空结果"按钮重新开始

## 支持的文本格式

程序专门设计用于处理以下格式的文本文件：

```
M24_230001【抽泣】这是一些文本内容
	拼音行（以制表符开头，会被忽略）
M35_230002【叹气】【抽泣】另一行内容
	更多拼音内容
M100_230003【其他标签】第三行内容
```

### 解析规则

- ✅ **ID行**：以 `M` 开头后跟数字编号和6位数字ID的行会被处理（如 `M24_230001`、`M35_230002`、`M100_230003` 等）
- ❌ **拼音行**：以制表符开头的行会被忽略
- 🏷️ **标签格式**：`【标签内容】` 格式的文本会被提取
- 📝 **多标签**：同一行可以包含多个标签
- 🔢 **编号格式**：支持所有 `M` + 数字编号 + `_` + 6位数字的格式（如 M1、M24、M35、M100 等）

## 输出格式

### 界面显示
| 标签 | 出现次数 | 来源ID |
|------|----------|--------|
| 抽泣 | 2 | M24_230001, M35_230002 |
| 叹气 | 1 | M35_230002 |

### CSV导出
```csv
标签,出现次数,来源ID
抽泣,2,"M24_230001, M35_230002"
叹气,1,M35_230002
```

## 技术栈

- **框架**：.NET 10.0
- **语言**：C# 14 (最新语法特性)
- **UI框架**：Avalonia UI 11.1
- **架构模式**：MVVM
- **CSV处理**：CsvHelper
- **正则表达式**：System.Text.RegularExpressions

## 项目结构

```
TagAnalyzer/
├── Models/
│   └── TextParser.cs          # 文本解析逻辑
├── ViewModels/
│   └── MainWindowViewModel.cs  # 主窗口视图模型
├── MainWindow.axaml           # 主窗口界面
├── MainWindow.axaml.cs        # 主窗口代码后台
├── App.axaml                  # 应用程序定义
├── App.axaml.cs              # 应用程序代码后台
├── Program.cs                # 程序入口点
├── TagAnalyzer.csproj        # 项目文件
├── publish.ps1              # 发布脚本
└── README.md                # 说明文档
```

## 开发信息

- **作者**：jiashuai_xu@qq.com
- **版本**：1.0.0
- **许可证**：MIT
- **开发环境**：Visual Studio 2022 / VS Code
- **目标框架**：.NET 10.0
- **语言版本**：C# 14

## 常见问题

### Q: 程序无法启动？
A: 请确保已安装 .NET 10.0 Runtime，或使用 `dotnet run` 命令运行。

### Q: 无法选择文件？
A: 请确保文件格式为 `.txt`，程序会自动过滤文件类型。

### Q: 解析结果不正确？
A: 请检查文本格式是否符合要求，确保ID行以 `M` 开头后跟数字编号（如 `M24_`、`M35_`、`M100_` 等）。

### Q: CSV导出失败？
A: 请确保有足够的磁盘空间和文件写入权限。

## 更新日志

### v1.1.0 (2024-11-04)
- 🔧 **格式支持扩展**：支持所有 M 开头的数字编号格式（M24、M35、M1、M100 等）
- ✨ 统一处理 M 开头的编号格式，不再局限于 M35
- 📝 更新解析规则，支持更灵活的文件格式

### v1.0.0 (2024-01-XX)
- ✨ 初始版本发布
- 🎯 支持标签解析和统计
- 🖥️ 现代化GUI界面
- 📄 CSV导出功能
- 🌐 跨平台支持
- 🚀 使用 .NET 10 + C# 14 最新特性

---

**联系方式**：jiashuai_xu@qq.com
